enum EOrderStatus {
  PENDING
  COMPLETED
  CANCELLED
  DELIVERING
}

type TUserInfoSnapshot {
  name: String
  address: String!
  phoneNumber: String!
  email: String!
}

type TOrderItem {
  name: String!
  quantity: Int!
  price: Float!
  discountPercent: Float
  selectedOptions: [TItemOption]
}

type TOrderResponse {
  orderId: ID!
  userInfoSnapshot: TUserInfoSnapshot!
  paymentMethod: EPaymentMethod!
  items: [TOrderItem]!
  totalPrice: Float!
  momo: TMomoPayment
  crypto: TCryptoPayment
  transactionId: String
  createdAt: Date!
  updatedAt: Date!
}

"""
Input types
"""
input OrderItemInput {
  itemId: ID!
  quantity: Int!
  selectedOptions: [ItemOptionInput]
}

input UserSnapshotInput {
  email: String!
}

input CreateOrderInput {
  user: UserSnapshotInput!
  items: [OrderItemInput!]!
  paymentMethod: EPaymentMethod!
}

type Query {
  getOrder(orderID: ID!): TOrderResponse
  listOrders(offset: Int, limit: Int): [TOrderResponse]!
}

type Mutation {
  createOrder(input: CreateOrderInput!): TOrderResponse!
}
