enum EOrderStatus {
  PENDING
  COMPLETED
  CANCELLED
  DELIVERING
}

type TUserInfoSnapshot {
  name: String
  address: String!
  phoneNumber: String!
  email: String!
}

type TOrderItem {
  name: String!
  amount: Int!
  price: Float!
  note: String
  discountPercent: Float
  selectedOptions: [TItemOption]
}

type TCreateOrderResponse {
  orderId: String!
  momoPaymentUrl: String
  momoRequestId: String
  cryptoPaymentData: String
  codPaymentData: String
  createdAt: Timestamp!
  updatedAt: Timestamp!
}

type TOrderResponse {
  orderId: String!
  userInfoSnapshot: TUserInfoSnapshot!
  items: [TOrderItem]!
  totalPrice: Int!
  paymentMethod: EPaymentMethod!
  orderStatus: EOrderStatus!
  createdAt: Timestamp!
  updatedAt: Timestamp!
}

"""
Input types
"""
input OrderItemInput {
  itemId: String!
  amount: Int!
  note: String
  selectedOptions: [ItemOptionInput]
}

input CreateOrderInput {
  userId: String!
  items: [OrderItemInput]!
  paymentMethod: EPaymentMethod!
}

type Query {
  getOrder(orderId: String!): TOrderResponse!
}

type Mutation {
  createOrder(input: CreateOrderInput!): TCreateOrderResponse!
}
